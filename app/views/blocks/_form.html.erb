<%= form_with model: [page, Block.new], id: "new_block_form", class: "space-y-4 p-4 bg-white rounded-lg shadow", data: { turbo: true } do |f| %>
  <div>
    <%= f.select :blockable_type, 
                [['Text', 'Block::Text'], ['Heading', 'Block::Heading']], 
                {}, 
                class: "blockable-type-select w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" %>
  </div>
  
  <div class="heading-level hidden">
    <%= f.label :level, "Heading Level", class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= f.select :level, 
                (1..6).map { |i| [i, i] }, 
                {}, 
                class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" %>
  </div>
  
  <div>
    <%= f.label :content, class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= f.text_area :content, class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 min-h-[100px]" %>
  </div>
  
  <%= f.submit "Add Block", class: "w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors" %>
<% end %>

<script>
  document.addEventListener('turbo:load', function() {
    const blockableTypeSelect = document.querySelector('.blockable-type-select');
    const headingLevelDiv = document.querySelector('.heading-level');
    
    if (blockableTypeSelect) {
      blockableTypeSelect.addEventListener('change', function() {
        if (this.value === 'Block::Heading') {
          headingLevelDiv.classList.remove('hidden');
        } else {
          headingLevelDiv.classList.add('hidden');
        }
      });
    }
  });
</script> 